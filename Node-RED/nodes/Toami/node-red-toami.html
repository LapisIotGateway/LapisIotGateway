<!-- Toami out -->
<script type="text/x-red" data-template-name="toami out">
    <div class="form-row node-input-config">
        <label for="node-input-config"><i class="fa fa-random"></i> Config</label>
        <input type="text" id="node-input-config">
    </div>
    <div class="form-row">
        <label for="node-input-timeout"><i class="fa fa-tag"></i> Timeout</label>
        <input type="text" id="node-input-timeout" style="width:25%;">
        <label style="width:40px;">msec</label>
    </div>
    <div class="form-row">
        <label for="node-input-retry"><i class="fa fa-tag"></i> Retry</label>
        <input type="text" id="node-input-retry" style="width:25%; margin-right:8px;">
        <label style="width:50px;">interval</label>
        <input type="text" id="node-input-interval" style="width:25%;">
        <label style="width:40px;">msec</label>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-tips">When timeout is empty, use RED.settings.httpRequestTimeout.</div>
    <div class="form-tips">When retry is empty, be infinitely.</div>
</script>

<script type="text/x-red" data-help-name="toami out">
</script>

<script type="text/javascript">
/*globals RED */
RED.nodes.registerType("toami out", {
    category: "output",
    defaults: {
        name: {
            value: ""
        },
        config: {
            type: "toami-config",
            required: true
        },
        timeout: {
            value: "",
            validate: RED.validators.regex(/^\d*$/)
        },
        retry: {
            value: "",
            validate: RED.validators.regex(/^\d*$/)
        },
        interval: {
            value: "",
            validate: RED.validators.regex(/^\d*$/)
        }
    },
    icon: "white-globe.png",
    align: "right",
    color: "#E2D96E",
    inputs: 1,
    outputs: 0,
    label: function() {
        return this.name || "Toami";
    },
    labelStyle: function() {
        return this.name ? "node_label_italic" : "";
    }
});
</script>

<!-- Toami Config -->
<script type="text/x-red" data-template-name="toami-config">
    <div class="form-row">
        <label for="node-input-host"><i class="fa fa-tag"></i> Host</label>
        <input type="text" id="node-input-host">
    </div>
    <div class="form-row">
        <label for="node-input-gateway"><i class="fa fa-tag"></i> Gateway</label>
        <input type="text" id="node-input-gateway">
    </div>
    <div class="form-row">
        <label for="node-input-key"><i class="fa fa-tag"></i> Key</label>
        <input type="text" id="node-input-key">
    </div>
</script>

<script type="text/javascript">
/*globals RED */
RED.nodes.registerType("toami-config", {
    category: "config",
    defaults: {
        host: {
            value: "",
            required: true
        },
        gateway: {
            value: "",
            required: true
        },
        key: {
            value: "",
            required: true
        },
    },
    label: function() {
        return "h:" + this.host + ", g:" + this.gateway;
    },
});
</script>
